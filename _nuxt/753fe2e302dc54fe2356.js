(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{222:function(t,n,e){var content=e(249);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(37).default)("5dc5fc70",content,!0,{sourceMap:!1})},223:function(t,n,e){var content=e(251);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(37).default)("6e9f46ea",content,!0,{sourceMap:!1})},248:function(t,n,e){"use strict";var o=e(222);e.n(o).a},249:function(t,n,e){(n=e(36)(!1)).push([t.i,".itemWrap[data-v-62ea7e2a]{display:-webkit-box;display:flex}.taskTitle-W[data-v-62ea7e2a]{width:220px}.taskID-W[data-v-62ea7e2a],.taskP-W[data-v-62ea7e2a]{width:130px}.taskEvent-W[data-v-62ea7e2a]{width:80px}.connectQuantity-W[data-v-62ea7e2a]{margin-left:20px;padding-right:10px}.connectQuantityUpdate input[data-v-62ea7e2a]{width:60px;height:25px;font-size:14px;padding-left:5px}.connectQuantityUpdate button[data-v-62ea7e2a]{height:25px;font-size:12px}",""]),t.exports=n},250:function(t,n,e){"use strict";var o=e(223);e.n(o).a},251:function(t,n,e){(n=e(36)(!1)).push([t.i,".wrap[data-v-2830e6de]{width:calc(100vw - 400px);padding:15px;height:calc(100vh - 120px);overflow:auto}.wrap[data-v-2830e6de]::-webkit-scrollbar{display:none}h3[data-v-2830e6de]{border-bottom:2px solid #c4c3c3;padding-bottom:10px;margin-bottom:20px}",""]),t.exports=n},299:function(t,n,e){"use strict";e.r(n);var o=e(38),c=(e(6),e(4),e(2),e(1),e(5),e(0));function r(object,t){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),n.push.apply(n,e)}return n}var l={props:["task"],data:function(){return{connectQuantityUpdate:"0"}},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(n){Object(c.a)(t,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(source,n))}))}return t}({countEventLength:function(t){return null==t?0:Object.keys(t).length},changeOnlineState:function(t){var n=this;this.$axios.post("".concat("https://tmsys2020api.herokuapp.com","/authoritymgt/ControlOnline"),{taskID:this.task.missionIntroduction.taskID,uid:this.task.adminUid,taskOnlineState:!this.task.administrator.taskOnline}).then((function(e){"success"==e.data.message?(n.getTaskData(),0==n.task.administrator.taskOnline&&n.resetQuantity(t)):alert("出現錯誤，請稍後再嘗試。")}))},updateQuantity:function(t){var n=this;this.$axios.post("".concat("https://tmsys2020api.herokuapp.com","/authoritymgt/updateQuantity"),{connectQuantityUpdate:this.connectQuantityUpdate,taskID:t.missionIntroduction.taskID,adminUid:t.adminUid}).then((function(t){"success"==t.data.status?(n.$emit("upQuantityDataItem"),n.connectQuantityUpdate=0):alert(t.data.message)}))},resetQuantity:function(t){var n=this;this.$axios.post("".concat("https://tmsys2020api.herokuapp.com","/authoritymgt/resetQuantity"),{taskID:t.missionIntroduction.taskID,adminUid:sessionStorage.getItem("adminUid")}).then((function(t){"success"==t.data.status?n.$emit("upQuantityDataItem"):alert(t.data.message)}))}},Object(o.b)({getTaskData:"CreateTask/getTaskData"}))},d=(e(248),e(26)),m={props:["item"],components:{OnlineGameControlItem:Object(d.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"itemWrap"},[e("div",{staticClass:"custom-control custom-switch taskTitle-W"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.task.administrator.taskOnline,expression:"task.administrator.taskOnline"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:t.task.missionIntroduction.taskID},domProps:{checked:Array.isArray(t.task.administrator.taskOnline)?t._i(t.task.administrator.taskOnline,null)>-1:t.task.administrator.taskOnline},on:{click:function(n){return t.changeOnlineState(t.task)},change:function(n){var e=t.task.administrator.taskOnline,o=n.target,c=!!o.checked;if(Array.isArray(e)){var r=t._i(e,null);o.checked?r<0&&t.$set(t.task.administrator,"taskOnline",e.concat([null])):r>-1&&t.$set(t.task.administrator,"taskOnline",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.task.administrator,"taskOnline",c)}}}),t._v(" "),e("label",{staticClass:"custom-control-label",staticStyle:{outline:"none",cursor:"pointer"},attrs:{for:t.task.missionIntroduction.taskID}},[t._v(t._s(t.task.missionIntroduction.titleText))])]),t._v(" "),e("div",{staticClass:"taskID-W"},[e("fa",{staticClass:"mr-2",attrs:{icon:["fas","user-circle"],title:"登入帳號"}}),t._v("\n      "+t._s(t.task.missionIntroduction.taskID)+"\n    ")],1),t._v(" "),e("div",{staticClass:"taskP-W"},[e("fa",{staticClass:"mr-2",attrs:{icon:["fas","lock"],title:"登入密碼"}}),t._v("\n      "+t._s(t.task.missionIntroduction.taskPassword)+"\n    ")],1),t._v(" "),e("div",{staticClass:"taskEvent-W"},[e("fa",{staticClass:"mr-2",attrs:{icon:["fas","journal-whills"],title:"事件數量"}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.countEventLength(t.task.clue))}})],1),t._v(" "),e("div",{staticClass:"connectQuantity-W"},[e("fa",{staticClass:"mr-2",attrs:{icon:["fas","wifi"],title:"連線名額"}}),t._v(" "),e("span",[t._v(t._s(t.task.connectStatus.nowConnectQuantity))]),t._v(" "),e("span",[t._v("/")]),t._v(" "),e("span",[t._v(t._s(t.task.connectStatus.upperLimitConnectQuantity))])],1),t._v(" "),e("div",{staticClass:"d-flex connectQuantityUpdate"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.connectQuantityUpdate,expression:"connectQuantityUpdate"}],attrs:{type:"number"},domProps:{value:t.connectQuantityUpdate},on:{input:function(n){n.target.composing||(t.connectQuantityUpdate=n.target.value)}}}),t._v(" "),e("button",{on:{click:function(n){return t.updateQuantity(t.task)}}},[e("fa",{attrs:{icon:["fas","cog"]}})],1),t._v(" "),e("button",{on:{click:function(n){return t.resetQuantity(t.task)}}},[e("fa",{attrs:{icon:["fas","recycle"]}})],1)])])])}),[],!1,null,"62ea7e2a",null).exports},data:function(){return{show:!1}},methods:{upQuantityDataList:function(){this.$emit("upQuantityData")}}},k={layout:"layoutAdmin",middleware:"authorityConfirm",components:{OnlineGameControlList:Object(d.a)(m,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"accordion mb-3",attrs:{id:"accordionExample"}},[e("div",{staticClass:"card shadow-sm"},[e("div",{staticClass:"card-header",attrs:{id:"headingOne"},on:{click:function(n){t.show=!t.show}}},[e("p",{staticClass:"mb-0",attrs:{"data-toggle":"collapse","data-target":"#"+t.item.key}},[t._v(t._s(t.item.name))])]),t._v(" "),e("div",{staticClass:"collapse",class:{show:t.show},attrs:{id:t.item.key,"data-parent":"#accordionExample"}},[e("div",{staticClass:"card-body"},[e("ul",{staticClass:"list-group list-group-flush"},t._l(t.item.taskData,(function(n,o){return e("OnlineGameControlItem",{key:o,attrs:{task:n},on:{upQuantityDataItem:t.upQuantityDataList}})})),1)])])])])])}),[],!1,null,"fbf8d444",null).exports},data:function(){return{TaskData:{},adminData:{}}},computed:{totalData:function(){var data=[];for(name in this.adminData)data.push({name:this.adminData[name].nickname,taskData:this.TaskData[name],key:this.adminData[name].uid});return data}},methods:{getAllTaskData:function(){var t=this;this.$axios.get("".concat("https://tmsys2020api.herokuapp.com","/authoritymgt/getAllTaskData")).then((function(n){t.TaskData=n.data})).then((function(){t.$axios.get("".concat("https://tmsys2020api.herokuapp.com","/authoritymgt/getAllAdminData")).then((function(n){t.adminData=n.data})).catch((function(t){alert(t)}))})).catch((function(t){alert(t)}))}},mounted:function(){this.getAllTaskData()}},h=(e(250),Object(d.a)(k,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wrap"},[e("h3",[t._v("授權管理")]),t._v(" "),t._l(t.totalData,(function(n){return e("OnlineGameControlList",{key:n.key,attrs:{item:n},on:{upQuantityData:t.getAllTaskData}})}))],2)}),[],!1,null,"2830e6de",null));n.default=h.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{224:function(t,e,o){var content=o(253);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(37).default)("4a08e779",content,!0,{sourceMap:!1})},252:function(t,e,o){"use strict";var n=o(224);o.n(n).a},253:function(t,e,o){(e=o(36)(!1)).push([t.i,'.wrap[data-v-5d10cd88]{width:calc(100vw - 400px);padding:15px;height:calc(100vh - 120px);overflow:auto}.wrap[data-v-5d10cd88]::-webkit-scrollbar{display:none}h3[data-v-5d10cd88]{border-bottom:2px solid #c4c3c3;padding-bottom:10px;margin-bottom:20px}.custom-file-label[data-v-5d10cd88]:after{content:"上傳檔案"}.taskImgView[data-v-5d10cd88]{width:100%;height:250px;background-position:50%;background-size:contain;background-repeat:no-repeat}.sysCheckbox[data-v-5d10cd88]{border-left:none;padding-left:0}.qColor[data-v-5d10cd88]{color:#c4bdbd;font-size:14px;cursor:help}.remindBorder[data-v-5d10cd88]{border:2px solid red}.remindBorderBannerImg[data-v-5d10cd88],.remindBorderPID[data-v-5d10cd88]{border:2px solid red;border-radius:5px;margin-bottom:0!important}.remindText[data-v-5d10cd88]{color:red}',""]),t.exports=e},305:function(t,e,o){"use strict";o.r(e);o(6),o(4),o(2),o(1),o(5),o(17),o(15),o(10);var n=o(0),r=o(38);o(218);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var l={layout:"layoutAdmin",middleware:"taskContOver",data:function(){return{disabledCreateBtn:!1,createTaskConfig:{taskImg:"",taskImgName:"尚未選擇檔案",theFileIsTooBig:!1},administrator:{taskOnline:!1},missionIntroduction:{titleText:"",contentText:"",footerText:"",bannerImg:"",taskType:"alone"},taskID:"",taskPassword:"",systemSetting:{propsSys:!1,propsText:"",promptSys:!1,promptText:""},remind:{titleText:"close",bannerImg:"close",footerText:"close",taskID:"close",taskPassword:"close"},clue:[]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.d)("adminUser",{adminUid:function(t){return t.adminUid},adminSignIn:function(t){return t.adminSignIn},adminNickName:function(t){return t.adminNickName}})),watch:{taskID:function(){this.taskID=this.taskID.replace(/[\W]/g,"")},taskPassword:function(){this.taskPassword=this.taskPassword.replace(/[\W]/g,"")}},methods:{fileSelectImg:function(t){if(0!=t.target.files.length)if(this.validateFileSize(t),this.createTaskConfig.theFileIsTooBig)this.createTaskConfig.theFileIsTooBig=!1;else{var e=t.target.files.item(0);this.createTaskConfig.taskImgName=e.name;var o=new FileReader;o.addEventListener("load",this.imageLoaded),o.readAsDataURL(e)}},imageLoaded:function(t){this.createTaskConfig.taskImg=t.target.result,this.missionIntroduction.bannerImg=t.target.result},validateFileSize:function(t){t.target.files.item(0).size/1024>50&&(alert("上傳檔案大小不得超過 50 KB！"),this.createTaskConfig.theFileIsTooBig=!0);var e=t.target.files.item(0).type.split("/");"png"==e[1]||"pdf"==e[1]||"jpeg"==e[1]||"jpg"==e[1]||(alert("不支援的檔案格式！僅支援上傳 JPG, PNG, PDF 檔案，且檔案大小不得超過 200 KB。"),this.createTaskConfig.theFileIsTooBig=!0)},createTheTask:function(){var t=this;if(this.disabledCreateBtn=!0,!this.checkInputVal())return alert("資料填寫不完整，請再次確認！"),void(this.disabledCreateBtn=!1);this.$axios.post("".concat("https://tmsys2020api.herokuapp.com","/task/createTask"),{adminUid:this.adminUid,administrator:{taskOnline:!1},onlineStatus:!1,connectStatus:{nowConnectQuantity:0,upperLimitConnectQuantity:0,connectTonken:{initial:!0}},taskVersion:"".concat((new Date).getTime()),missionIntroduction:{titleText:this.missionIntroduction.titleText,contentText:this.missionIntroduction.contentText,footerText:this.missionIntroduction.footerText,bannerImg:this.missionIntroduction.bannerImg,taskType:this.missionIntroduction.taskType,taskID:this.taskID,taskPassword:this.taskPassword},systemSetting:{promptSys:this.systemSetting.promptSys,promptText:this.systemSetting.promptText,propsSys:this.systemSetting.propsSys,propsText:this.systemSetting.propsText},clue:[]}).then((function(e){"TaskIDRepeat"==e.data.status&&(alert(e.data.message),t.disabledCreateBtn=!1),"success"==e.data.status&&(t.$router.replace({name:"admin-TaskMgt"}),alert(e.data.message)),"error"==e.data.status&&(t.$router.replace({name:"admin-TaskMgt"}),alert(e.data.message))})).catch((function(e){t.$router.replace({name:"admin-TaskMgt"}),alert("未知錯誤，請稍後再試！")}))},checkInputVal:function(){return""==this.missionIntroduction.titleText?this.remind.titleText="show":this.remind.titleText="close",""==this.missionIntroduction.bannerImg?this.remind.bannerImg="show":this.remind.bannerImg="close",""==this.taskID?this.remind.taskID="show":this.remind.taskID="close",""==this.taskPassword?this.remind.taskPassword="show":this.remind.taskPassword="close",""==this.missionIntroduction.contentText&&(this.missionIntroduction.contentText="無任務背景資訊"),""==this.missionIntroduction.footerText&&(this.missionIntroduction.footerText="無置底資訊"),""!=this.missionIntroduction.titleText&&""!=this.missionIntroduction.bannerImg&&""!=this.taskID&&""!=this.taskPassword}}},d=(o(252),o(26)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[o("h3",[t._v("創建任務")]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-2 col-form-label"},[t._v("任務名稱")]),t._v(" "),o("div",{staticClass:"col-10"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.missionIntroduction.titleText,expression:"missionIntroduction.titleText",modifiers:{trim:!0}}],staticClass:"form-control",class:{remindBorder:"show"==t.remind.titleText},attrs:{type:"txet",maxlength:"10",required:""},domProps:{value:t.missionIntroduction.titleText},on:{input:function(e){e.target.composing||t.$set(t.missionIntroduction,"titleText",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),"show"==t.remind.titleText?o("div",{staticClass:"remindText"},[t._v("*任務名稱為必填欄位")]):t._e()])]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-2 col-form-label"},[t._v("任務背景")]),t._v(" "),o("div",{staticClass:"col-10"},[o("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.missionIntroduction.contentText,expression:"missionIntroduction.contentText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:t.missionIntroduction.contentText},on:{input:function(e){e.target.composing||t.$set(t.missionIntroduction,"contentText",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-2 col-form-label"},[t._v("任務圖片")]),t._v(" "),o("div",{staticClass:"col-10"},[o("div",{staticClass:"input-group mb-3",class:{remindBorderBannerImg:"show"==t.remind.bannerImg}},[o("div",{staticClass:"custom-file"},[o("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"task-Img",accept:"image/*"},on:{change:t.fileSelectImg}}),t._v(" "),o("label",{staticClass:"custom-file-label"},[t._v("\n            "+t._s(t.createTaskConfig.taskImgName)+"\n          ")])])]),t._v(" "),"show"==t.remind.bannerImg?o("div",{staticClass:"remindText"},[t._v("*任務圖片欄位不得為空")]):t._e()]),t._v(" "),o("div",{staticClass:"col-2"}),t._v(" "),t.createTaskConfig.taskImg?o("div",{staticClass:"col-10"},[o("ul",{staticClass:"list-group"},[o("li",{staticClass:"list-group-item"},[t.createTaskConfig.taskImg?o("div",{staticClass:"taskImgView",style:"background-image: url("+t.createTaskConfig.taskImg+");"}):t._e()])])]):t._e()]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-2 col-form-label"},[t._v("置底資訊")]),t._v(" "),o("div",{staticClass:"col-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.missionIntroduction.footerText,expression:"missionIntroduction.footerText"}],staticClass:"form-control",attrs:{type:"txet",maxlength:"10"},domProps:{value:t.missionIntroduction.footerText},on:{input:function(e){e.target.composing||t.$set(t.missionIntroduction,"footerText",e.target.value)}}})])]),t._v(" "),o("fieldset",{staticClass:"form-group mb-5"},[o("div",{staticClass:"row"},[o("legend",{staticClass:"col-form-label col-2 pt-0"},[t._v("任務型態")]),t._v(" "),o("div",{staticClass:"col-10"},[o("div",{staticClass:"form-check form-check-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.missionIntroduction.taskType,expression:"missionIntroduction.taskType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"inlineRadioOptions",id:"stand-Alone-Device",value:"alone"},domProps:{checked:t._q(t.missionIntroduction.taskType,"alone")},on:{change:function(e){return t.$set(t.missionIntroduction,"taskType","alone")}}}),t._v(" "),o("label",{staticClass:"form-check-label",attrs:{for:"stand-Alone-Device"}},[t._v("獨立裝置")])]),t._v(" "),o("div",{staticClass:"form-check form-check-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.missionIntroduction.taskType,expression:"missionIntroduction.taskType"}],staticClass:"form-check-input",attrs:{type:"radio",name:"inlineRadioOptions",id:"cloud-Connect",value:"cloud",disabled:""},domProps:{checked:t._q(t.missionIntroduction.taskType,"cloud")},on:{change:function(e){return t.$set(t.missionIntroduction,"taskType","cloud")}}}),t._v(" "),o("label",{staticClass:"form-check-label",attrs:{for:"cloud-Connect"}},[t._v("雲端連線")])]),t._v(" "),o("div",{staticClass:"row mt-3"},[o("div",{staticClass:"col"},[o("div",{staticClass:"input-group",class:{remindBorderPID:"show"==t.remind.taskPassword}},[t._m(0),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.taskID,expression:"taskID",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"*限英數字",maxlength:"7"},domProps:{value:t.taskID},on:{input:function(e){e.target.composing||(t.taskID=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),"show"==t.remind.taskID?o("div",{staticClass:"remindText"},[t._v("*登入帳號為必填欄位")]):t._e()]),t._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"input-group",class:{remindBorderPID:"show"==t.remind.taskPassword}},[t._m(1),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.taskPassword,expression:"taskPassword",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"*限英數字",maxlength:"7"},domProps:{value:t.taskPassword},on:{input:function(e){e.target.composing||(t.taskPassword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),"show"==t.remind.taskPassword?o("div",{staticClass:"remindText"},[t._v("*登入密碼為必填欄位")]):t._e()])])])])]),t._v(" "),o("fieldset",{staticClass:"form-group"},[o("div",{staticClass:"row"},[o("legend",{staticClass:"col-form-label col-2 pt-0"},[t._v("掛載系統")]),t._v(" "),o("div",{staticClass:"col-10"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-6"},[o("div",{staticClass:"input-group mb-3"},[o("div",{staticClass:"input-group-prepend"},[o("span",{staticClass:"input-group-text"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.systemSetting.propsSys,expression:"systemSetting.propsSys"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.systemSetting.propsSys)?t._i(t.systemSetting.propsSys,null)>-1:t.systemSetting.propsSys},on:{change:function(e){var o=t.systemSetting.propsSys,n=e.target,r=!!n.checked;if(Array.isArray(o)){var c=t._i(o,null);n.checked?c<0&&t.$set(t.systemSetting,"propsSys",o.concat([null])):c>-1&&t.$set(t.systemSetting,"propsSys",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.systemSetting,"propsSys",r)}}})]),t._v(" "),o("span",{staticClass:"input-group-text sysCheckbox"},[o("span",{staticClass:"mr-1"},[t._v("道具物品")]),t._v(" "),o("fa",{staticClass:"qColor",attrs:{icon:["fas","question-circle"],title:"當玩家解開事件後可獲得相應的道具。"}})],1)]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.systemSetting.propsText,expression:"systemSetting.propsText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",disabled:!t.systemSetting.propsSys,placeholder:"*限2字",maxlength:"2"},domProps:{value:t.systemSetting.propsText},on:{input:function(e){e.target.composing||t.$set(t.systemSetting,"propsText",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),o("div",{staticClass:"col-6"},[o("div",{staticClass:"input-group mb-3"},[o("div",{staticClass:"input-group-prepend"},[t._m(2),t._v(" "),o("span",{staticClass:"input-group-text sysCheckbox"},[o("span",{staticClass:"mr-1"},[t._v("小隊通訊")]),t._v(" "),o("fa",{staticClass:"qColor",attrs:{icon:["fas","question-circle"],title:"小隊內的獨立通訊頻道。"}})],1)]),t._v(" "),o("input",{staticClass:"form-control",attrs:{type:"text",disabled:""}})])]),t._v(" "),o("div",{staticClass:"col-6"},[o("div",{staticClass:"input-group mb-3"},[o("div",{staticClass:"input-group-prepend"},[t._m(3),t._v(" "),o("span",{staticClass:"input-group-text sysCheckbox"},[o("span",{staticClass:"mr-1"},[t._v("公告發布")]),t._v(" "),o("fa",{staticClass:"qColor",attrs:{icon:["fas","question-circle"],title:"向全體玩家發布消息使用。"}})],1)]),t._v(" "),o("input",{staticClass:"form-control",attrs:{type:"text",disabled:""}})])]),t._v(" "),o("div",{staticClass:"col-6"},[o("div",{staticClass:"input-group mb-3"},[o("div",{staticClass:"input-group-prepend"},[t._m(4),t._v(" "),o("span",{staticClass:"input-group-text sysCheckbox"},[o("span",{staticClass:"mr-1"},[t._v("榜單排行")]),t._v(" "),o("fa",{staticClass:"qColor",attrs:{icon:["fas","question-circle"],title:"各小隊間的成績排行"}})],1)]),t._v(" "),o("input",{staticClass:"form-control",attrs:{type:"text",disabled:""}})])])])])])]),t._v(" "),o("div",{staticClass:"form-group row mt-5 mb-5"},[o("div",{staticClass:"col-12 text-right"},[o("button",{staticClass:"btn btn-dark",staticStyle:{width:"90px"},attrs:{type:"submit",disabled:t.disabledCreateBtn},on:{click:t.createTheTask}},[t.disabledCreateBtn?o("div",{staticClass:"spinner-border spinner-border-sm text-light",attrs:{role:"status"}},[o("span",{staticClass:"sr-only"},[t._v("Loading...")])]):o("span",[t._v("建立任務")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("登入帳號設定")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("登入密碼設定")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-text"},[e("input",{attrs:{type:"checkbox",disabled:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-text"},[e("input",{attrs:{type:"checkbox",disabled:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-text"},[e("input",{attrs:{type:"checkbox",disabled:""}})])}],!1,null,"5d10cd88",null);e.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{225:function(t,e,n){var content=n(255);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(37).default)("80da8fde",content,!0,{sourceMap:!1})},226:function(t,e,n){var content=n(257);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(37).default)("91ef3ba6",content,!0,{sourceMap:!1})},254:function(t,e,n){"use strict";var o=n(225);n.n(o).a},255:function(t,e,n){(e=n(36)(!1)).push([t.i,".card-task-img[data-v-665c8994]{position:relative;height:120px;background-color:#dfd9d9;background-size:cover;background-position:top;background-repeat:no-repeat}.MSwitch[data-v-665c8994]{position:absolute;right:5px;bottom:5px}.playerType[data-v-665c8994]{position:absolute;left:7px;top:2px}.card-text[data-v-665c8994]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.gameIcon[data-v-665c8994]{display:inline-block;width:20px}.card-footer-btn button[data-v-665c8994]{width:30px;padding:4px}.card[data-v-665c8994]{width:290px;border-radius:.5rem;overflow:hidden}.card-body[data-v-665c8994]{position:relative}.onlineView[data-v-665c8994]{position:absolute;top:0;right:0;left:0;background-color:rgba(24,19,19,.80784);height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.onlineView p[data-v-665c8994]{color:#fff;font-weight:700;font-size:34px}.onlineView.show[data-v-665c8994]{opacity:1}",""]),t.exports=e},256:function(t,e,n){"use strict";var o=n(226);n.n(o).a},257:function(t,e,n){(e=n(36)(!1)).push([t.i,".wrap[data-v-5a5e15da]{width:calc(100vw - 400px);padding:15px}h3[data-v-5a5e15da]{border-bottom:2px solid #c4c3c3;padding-bottom:10px;margin-bottom:20px}",""]),t.exports=e},301:function(t,e,n){"use strict";n.r(e);n(6),n(4),n(2),n(1),n(5);var o=n(0),c=n(38);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={props:["item"],data:function(){return{lock:this.item.onlineStatus,teamPlay:!1}},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({removeTask:function(t){var e=this;this.$axios.post("".concat("https://tmsys2020api.herokuapp.com","/task/removeTask"),{id:t.missionIntroduction.taskID,uid:sessionStorage.getItem("adminUid")}).then((function(t){"success"==t.data.message?(alert("任務已刪除！"),e.getTaskData()):alert("出現錯誤，請稍後再嘗試。")}))},goToMgtEvent:function(t){this.$router.push({name:"admin-MgtEvent-MgtEvent",params:{MgtEvent:t.missionIntroduction.taskID}})},countEventLength:function(t){return Object.keys(t).length},changeTaskOnline:function(t){var e=this;null!=t.clue?0!=this.item.administrator.taskOnline?(this.lock=!this.lock,this.$axios.post("".concat("https://tmsys2020api.herokuapp.com","/admin/ControlOnline"),{taskID:t.missionIntroduction.taskID,uid:t.adminUid,taskOnlineState:this.lock}).then((function(t){"success"==t.data.message?(alert("任務上線狀態已更動！"),e.getTaskData()):alert("出現錯誤，請稍後再嘗試。")}))):alert("任務尚未授權，請聯繫權限管理員！"):alert("無事件的任務無法上線唷！")}},Object(c.b)({getTaskData:"CreateTask/getTaskData"}))},d=(n(254),n(26));function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={layout:"layoutAdmin",components:{taskCart:Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card shadow mb-3"},[n("div",{staticClass:"card-task-img",style:"background-image: url("+t.item.missionIntroduction.bannerImg+");"},[n("div",{staticClass:"playerType"},[t.teamPlay?n("fa",{attrs:{icon:["fas","users"]}}):n("fa",{attrs:{icon:["fas","user"]}})],1),t._v(" "),n("div",{staticClass:"custom-control custom-switch MSwitch",on:{click:function(e){return t.changeTaskOnline(t.item)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.lock,expression:"lock"}],staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:!t.item.administrator.taskOnline},domProps:{checked:Array.isArray(t.lock)?t._i(t.lock,null)>-1:t.lock},on:{change:function(e){var n=t.lock,o=e.target,c=!!o.checked;if(Array.isArray(n)){var r=t._i(n,null);o.checked?r<0&&(t.lock=n.concat([null])):r>-1&&(t.lock=n.slice(0,r).concat(n.slice(r+1)))}else t.lock=c}}}),t._v(" "),n("label",{staticClass:"custom-control-label",staticStyle:{outline:"none",cursor:"pointer"}})])]),t._v(" "),n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(t._s(t.item.missionIntroduction.titleText))]),t._v(" "),n("p",{staticClass:"card-text",attrs:{title:t.item.missionIntroduction.contentText}},[t._v(t._s(t.item.missionIntroduction.contentText))]),t._v(" "),n("div",{staticClass:"card-text"},[void 0!==t.item.clue?n("div",{staticClass:"card-M-Item mb-1"},[n("span",{staticClass:"gameIcon"},[n("fa",{attrs:{icon:["fas","journal-whills"],title:"事件數量"}})],1),t._v(" "),n("span",[t._v("：")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.countEventLength(t.item.clue))}})]):n("div",{staticClass:"card-M-Item mb-1"},[n("span",{staticClass:"gameIcon"},[n("fa",{attrs:{icon:["fas","journal-whills"],title:"事件數量"}})],1),t._v(" "),n("span",[t._v("：")]),t._v(" "),n("span",[t._v("尚無事件")])]),t._v(" "),n("div",{staticClass:"card-M-Item mb-1"},[n("span",{staticClass:"gameIcon"},[n("fa",{attrs:{icon:["fas","user"],title:"登入帳號"}})],1),t._v(" "),n("span",[t._v("：")]),t._v(" "),n("span",[t._v(t._s(t.item.missionIntroduction.taskID))])]),t._v(" "),n("div",{staticClass:"card-M-Item"},[n("span",{staticClass:"gameIcon"},[n("fa",{attrs:{icon:["fas","lock"],title:"登入密碼"}})],1),t._v(" "),n("span",[t._v("：")]),t._v(" "),n("span",[t._v(t._s(t.item.missionIntroduction.taskPassword))])])]),t._v(" "),n("div",{staticClass:"onlineView",class:{show:t.lock}},[n("p",[t._v("任務上線中")])])]),t._v(" "),n("div",{staticClass:"card-footer d-flex justify-content-between align-items-center card-footer-btn"},[n("div",[n("fa",{staticClass:"mr-2",attrs:{icon:["fas","wifi"],title:"連線名額"}}),t._v(" "),n("span",[t._v(t._s(t.item.connectStatus.nowConnectQuantity))]),t._v(" "),n("span",[t._v("/")]),t._v(" "),n("span",[t._v(t._s(t.item.connectStatus.upperLimitConnectQuantity))])],1),t._v(" "),n("div",[n("button",{staticClass:"btn btn-outline-dark btn-sm",attrs:{type:"button",disabled:t.lock,title:"事件編輯"},on:{click:function(e){return t.goToMgtEvent(t.item)}}},[n("fa",{attrs:{icon:["fas","edit"]}})],1),t._v(" "),n("button",{staticClass:"btn btn-outline-dark btn-sm",attrs:{type:"button",disabled:"",title:"數據分析"}},[n("fa",{attrs:{icon:["fas","chart-pie"]}})],1),t._v(" "),n("button",{staticClass:"btn btn-outline-dark btn-sm",attrs:{type:"button",disabled:t.lock,title:"刪除任務"},on:{click:function(e){return t.removeTask(t.item)}}},[n("fa",{attrs:{icon:["fas","trash-alt"]}})],1)])])])])}),[],!1,null,"665c8994",null).exports},computed:m({taskNum:function(){return Object.keys(this.taskData).length}},Object(c.d)("CreateTask",{taskData:function(t){return t.data}})),methods:m({},Object(c.b)({getTaskData:"CreateTask/getTaskData"})),mounted:function(){this.getTaskData()}},k=(n(256),Object(d.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrap"},[e("h3",[this._v("任務管理")]),this._v(" "),0==this.taskNum?e("div",{staticClass:"taskEmpty"},[e("p",[this._v("您目前還沒有任務...")])]):e("div",{staticClass:"card-deck"},this._l(this.taskData,(function(t,n){return e("taskCart",{key:n,attrs:{item:t}})})),1)])}),[],!1,null,"5a5e15da",null));e.default=k.exports}}]);